/*!CK:2427187562!*//*1437986948,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["JguHR"]); }

__d("TimelinePageLoadParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={REQUEST_PARAM_NAME:"tipld",LAST_RANKED_UNIT_TIME:"rt",REPORT_UNIT_COUNT:"rc",STORY_UNIT_COUNT:"sc",VISIBLE_UNIT_COUNT:"vc"};},null);
__d("TimelineSeenStateConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"};},null);
__d("TimelineViewportTrackingLogType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={IMPRESSION:"impression",DURATION:"duration"};},null);
__d("ComposerXEmptyAttachment",["ComposerXAttachment"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l){"use strict";g.call(this);this._root=k;if(l)this.attachmentClassName=l;}j.prototype.getRoot=function(){"use strict";return this._root;};e.exports=j;},null);
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_4_na");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("onViewportChanged",["EventListener","emptyFunction","getViewportDimensions","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=[],l=false,m=null,n,o;function p(){var aa=i.withoutScrollbars();return {top:0,bottom:aa.height,left:0,right:aa.width};}function q(aa,ba){var ca={transform:ba||h.thatReturnsArgument,callback:aa,needsUpdate:true};k.push(ca);x();s();return {remove:r.bind(null,ca),scheduleCheck:v.bind(null,ca)};}function r(aa){var ba=k.indexOf(aa);if(ba!==-1){k.splice(ba,1);if(k.length===0){t();m=null;}}}function s(){if(!o){o=g.listen(window,'scroll',w);n=g.listen(window,'resize',u);}}function t(){if(o){o.remove();n.remove();o=n=null;}}function u(){m=null;w();}function v(aa){aa.needsUpdate=true;x();}function w(){k.map(function(aa){return aa.needsUpdate=true;});x();}function x(){if(!l){l=true;j(function(){l=false;z();});}}function y(aa){if(aa.needsUpdate){aa.needsUpdate=false;return true;}return false;}function z(){if(!m)m=p();var aa=k.filter(y),ba=aa.map(function(ca){return ca.transform.call(null,m);});aa.forEach(function(ca,da){return ca.callback.call(null,ba[da]);});}e.exports=q;},null);
__d("OnVisible.react",["React","getElementRect","onRectIsWithinViewport","onlyChild"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"OnVisible",propTypes:{onVisible:l.func,onHidden:l.func,buffer:l.number},componentDidMount:function(){this._createListener();},componentDidUpdate:function(){this._createListener();},componentWillUnmount:function(){this._removeListener();},reset:function(){this._removeListener();this._createListener();},check:function(){if(this._listener)this._listener.scheduleCheck();},_measureElementRect:function(){if(!this.isMounted())return null;var n=this.props.buffer||0,o=h(g.findDOMNode(this));o.left-=n;o.right+=n;o.top-=n;o.bottom+=n;return o;},_createListener:function(){var n=g.findDOMNode(this);if(this._listener&&n!==this._element)this._removeListener();if(!this._listener){this._element=n;this._listener=i(this._measureElementRect,function(o){var p=o?this.props.onVisible:this.props.onHidden;p&&p();}.bind(this));}},_removeListener:function(){if(this._listener){this._listener.remove();this._listener=null;}},render:function(){return j(this.props.children);}});e.exports=m;},null);
__d("ProfileInfoRequestNoteFlyout",["CSS","csx","DOM","Event","LayerDestroyOnHide","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o){"use strict";this.$ProfileInfoRequestNoteFlyout0=o;this.$ProfileInfoRequestNoteFlyout1=i.scry(this.$ProfileInfoRequestNoteFlyout0.getContentRoot(),"._958")[0];l(j.listen(n,'click',this.$ProfileInfoRequestNoteFlyout2.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('success',this.$ProfileInfoRequestNoteFlyout3.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('hide',this.$ProfileInfoRequestNoteFlyout4.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('error',this.$ProfileInfoRequestNoteFlyout5.bind(this)));}m.prototype.$ProfileInfoRequestNoteFlyout2=function(n){"use strict";this.$ProfileInfoRequestNoteFlyout0.show();n.kill();};m.prototype.$ProfileInfoRequestNoteFlyout5=function(n,o){"use strict";i.setContent(this.$ProfileInfoRequestNoteFlyout1,o.response.errorDescription);g.show(this.$ProfileInfoRequestNoteFlyout1);return false;};m.prototype.$ProfileInfoRequestNoteFlyout4=function(){"use strict";g.hide(this.$ProfileInfoRequestNoteFlyout1);};m.prototype.$ProfileInfoRequestNoteFlyout3=function(){"use strict";this.$ProfileInfoRequestNoteFlyout0.enableBehavior(k);this.$ProfileInfoRequestNoteFlyout0.hide();};e.exports=m;},null);
__d("TimelineContextItemLogger",["BanzaiLogger","Event","FBJSON","Parent","Run","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n='MTimelineXContextItemsLoggerConfig',o='impression',p='click',q='context_item_url',r='event',s="_md0",t=[];function u(w,x,y){var z=i.parse(w.getAttribute('data-store'));z[r]=x;if(y)z[q]=y;g.log(n,z);}var v={logWhenVisible:function(w){if(!t.length)k.onLeave(function(){t=[];});t.push(w);},logWhenClicked:function(w){m(h.listen(w,'click',function(x){var y=x.getTarget();if(y.nodeName!=='A')return;var z=j.byClass(y,s);z&&u(z,p,y.href);}));},listenToExpand:function(w){m(w.addListener('expanded',function(){while(t.length)u(t.pop(),o);}));}};e.exports=v;},null);
__d("TimelineLoadState",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={NOT_LOADED:0,LOADING:1,LOADED:2};e.exports=g;},null);
__d("TimelineSecondaryColumnUnitList",["CSS","DOM","Event","Run","csx","cx","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=30;function o(p,q){"use strict";var r=i.listen(q,'click',function(){this.$TimelineSecondaryColumnUnitList0=h.scry(p,"._16f_");this.$TimelineSecondaryColumnUnitList1();h.remove(q);this.emit('expanded');}.bind(this));j.onLeave(r.remove.bind(r));}o.prototype.$TimelineSecondaryColumnUnitList1=function(){"use strict";if(!this.$TimelineSecondaryColumnUnitList0.length)return;g.removeClass(this.$TimelineSecondaryColumnUnitList0.shift(),"_16f_");setTimeout(this.$TimelineSecondaryColumnUnitList1.bind(this),n);};m(o,{expanded:true});e.exports=o;},null);
__d("TimelineQueryDataStore",["TimelinePageLoadParam","KeyedCallbackManager","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=new h(),k='num_reports_tried',l='num_reports_visible',m='more_pager_data',n='finished',o={getDataToLoadNextSegment:function(p,q){j.executeOrEnqueue(p,function(r){this._mergeReportsAndStoriesDataCallback(r,q);}.bind(this));},setSectionFinished:function(p,q){var r=this._getSectionData(p);if(!r[n])r[n]={};r[n][q]=true;j.setResource(p,r);if(r[n].stories&&r[n].reports)this.emitAndHold('section_finished',p);},setReportsData:function(p,q,r){var s=this._getSectionData(p);s[k]=q;s[l]=r;j.setResource(p,s);},setStoriesData:function(p,q){var r=this._getSectionData(p);r[m]=q;j.setResource(p,r);},_getSectionData:function(p){var q=j.getResource(p);return q||{};},_mergeReportsAndStoriesDataCallback:function(p,q){var r=p[m];if(!r.hasOwnProperty(g.REQUEST_PARAM_NAME))r[g.REQUEST_PARAM_NAME]={};r[g.REQUEST_PARAM_NAME][g.REPORT_UNIT_COUNT]=p[k];var s=r[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT];r[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT]=s+p[l];q(r);}};i(o,{section_finished:true});e.exports=o;},null);
__d("TimelineSectionPager.react",["Arbiter","DataStore","Link.react","React","ReactComponentWithPureRenderMixin","TimelineConstants","TimelineLegacySections","TimelineLoadState","TimelineQueryDataStore","UIPagelet","FeedPlaceHolderStory.react","OnVisible.react","$","cx","getElementRect","getViewportDimensions","keyMirror","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=j,z=y.PropTypes,aa=null,ba=false,ca={},da=w({LINK:null,ON_VISIBLE:null}),ea=500,fa=j.createClass({displayName:"TimelineSectionPager",_loading:ba,_storeListener:aa,_sectionLoadSubscription:aa,mixins:[k],propTypes:{loadMoreLabel:z.string.isRequired,sectionKey:z.string.isRequired,rootID:z.string.isRequired},componentWillMount:function(){ca[this.props.sectionKey]=this;this._loading=false;this._storeListener=o.addListener('section_finished',this._handleSectionFinished);this._sectionLoadSubscription=g.subscribe(l.SECTION_FULLY_LOADED,this._handleSectionLoad);},getInitialState:function(){return {buffer:0,pagerState:da.ON_VISIBLE};},render:function(){if(this.state.pagerState===da.LINK)return (j.createElement(i,{className:"_3g20",onClick:this._onPagerClick},this.props.loadMoreLabel));return (j.createElement(r,{buffer:this.state.buffer,onVisible:this._loadNextSegment,ref:"onVisible"},j.createElement(q,{className:"_lr_"})));},componentDidMount:function(){this._updateBuffer();},componentWillUnmount:function(){this._storeListener.remove();this._sectionLoadSubscription.unsubscribe();ca[this.props.sectionKey]=null;},statics:{getInstance:function(ga){return ca[ga];}},removeOnVisible:function(){this.setState({pagerState:da.LINK});},restoreOnVisible:function(){this.setState({pagerState:da.ON_VISIBLE});},unmount:function(){j.unmountComponentAtNode(s(this.props.rootID));},_onPagerClick:function(){var ga=m.get(this.props.sectionKey);if(ga)ga.activateContentScrollLoad();this._loadNextSegment();},_loadNextSegment:function(){if(this._loading)return;this._loading=true;var ga=m.get(this.props.sectionKey);if(ga&&ga.hasPendingCallbacks()){ga.runPendingDisplayCallbacks();this._onLoadComplete();}else o.getDataToLoadNextSegment(this.props.sectionKey,this._nextSegmentDataHandler);},_nextSegmentDataHandler:function(ga){var ha=m.get(this.props.sectionKey);if(ha){this._loadPagelet(ga);return;}var ia=g.subscribe(l.SECTION_REGISTERED,function(ja,ka){if(ka.scrubberKey===this.props.sectionKey){this._loadPagelet(ga);ia.unsubscribe();}}.bind(this));},_loadPagelet:function(ga){var ha=ga.page_index,ia=m.get(this.props.sectionKey);if(!ia){this._loading=false;return;}var ja=ia.getPageLoadStatus(ha);if(ja!==n.NOT_LOADED){this._loading=false;this._enableNextPage();return;}var ka=function(ma){return this._pageletDisplay(ha,ma);}.bind(this),la={append:true,constHeight:true,crossPage:true,displayCallback:ka,finallyHandler:this._onLoadComplete,jsNonblock:true,usePipe:true};ia.setPageLoadStatus(ha,n.LOADING);p.loadFromEndpoint('ProfileTimelineSectionPagelet',ga.unit_container_id,ga,la);},_handleSectionFinished:function(ga){if(ga===this.props.sectionKey)this.unmount();},_handleSectionLoad:function(ga,ha){if(ha.scrubberKey===this.props.sectionKey)this._updateBuffer();},_updateBuffer:function(){var ga=m.get(this.props.sectionKey),ha=0;if(ga&&!ga.isRightColumnFinished()){ha=h.get(l.DS_COLUMN_HEIGHT_DIFFERENTIAL,this.props.sectionKey);if(!ha)ha=0;}var ia;x(function(){var ja=u(j.findDOMNode(this)),ka=v().height,la=ja.top-ka-1,ma=Math.abs(Math.min(ha,0))+ea;ia=Math.min(ma,Math.max(la,0));}.bind(this),function(){this.setState({buffer:ia},function(){if(this.refs.onVisible)this.refs.onVisible.reset();}.bind(this));}.bind(this));},_canScrollLoad:function(){var ga=m.get(this.props.sectionKey);return !!ga&&ga.canContentScrollLoad();},_onLoadComplete:function(){if(this.isMounted()){this._loading=false;this._enableNextPage();}},_enableNextPage:function(){this.setState({pagerState:this._canScrollLoad()?da.ON_VISIBLE:da.LINK});},_pageletDisplay:function(ga,ha){var ia=m.get(this.props.sectionKey);if(ia){ia.setPageLoadStatus(ga,n.LOADED);if(ia.canContentScrollLoad()){ha();}else ia.queueDisplayCallback(ga,ha);}}});e.exports=fa;},null);
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","Vector","$","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=(function(){var u={},v={};function w(y){k.scry(y,"._3ram").forEach(function(z){var aa=z.getAttribute('data-endmarker'),ba=z.getAttribute('data-pageindex'),ca=function(){if(!z.parentNode)return;i.set(n.DS_LOADED,y.id,ba);j.remove(z);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:aa,pageIndex:ba,capsuleID:y.id,childCount:y.childNodes.length});};if(o.get(aa)){ca();}else var da=g.subscribe(n.SECTION_REGISTERED,function(ea,fa){if(fa.scrubberKey===aa){ca();da.unsubscribe();}});});g.inform('TimelineCapsule/balanced',{capsule:y});}function x(y,z){var aa=m.byAttribute(y,'data-size');if(aa)if(h.hasClass(y.parentNode,'timelineReportContent')){z(y);}else z(aa);}return {removeUnit:function(y){x(y,function(z){j.remove(z);});},removeUnitWithID:function(y){t.removeUnit(q(y));},hideUnit:function(y){x(y,function(z){h.addClass(z,'fbTimelineColumnHidden');});},undoHideUnit:function(y,z){j.remove(m.byClass(z,'hiddenText'));x(y,function(aa){h.removeClass(aa,'fbTimelineColumnHidden');});},unplacehold:function(y){var z=q(y);z.style.top=null;h.removeClass(z,'visiblePlaceholder');h.removeClass(z,'placeholder');var aa=m.byClass(z,'fbTimelineCapsule');delete u[aa.id][y];t.balanceCapsule(aa);},scrollToCapsule:function(y){if(!v.hasOwnProperty(y.id)){var z=p.getElementPosition(y.parentNode);l.scrollTo(new p(p.getScrollPosition().x,z.y-n.SCROLL_TO_OFFSET,'document'));v[y.id]=true;}},loadTwoColumnUnits:function(y,z,aa){var ba=q(y);s(function(){var ca=m.byClass(ba,'fbTimelineSection');if(ca&&!z){var da=k.find(ba,"._2t4u"),ea=k.find(ba,"._2t4v"),fa=ea.offsetHeight-da.offsetHeight;i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,aa,fa);}},w.bind(null,ba));}};})();e.exports=t;},null);
__d("TimelineUnitSelector",["DOMQuery","csx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getUnitsWithTime:function(j){return g.scry(j,"._5jmm[data-time]");}};e.exports=i;},null);
__d("TimelineComposerUtilities",["Event","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=86400*31,r=86400000,s={listenToSetEstimatedDate:function(t,u){return h.subscribe('ComposerXTimelineTagger/init',function(v,w){if(l.contains(t,w.datePickerElement)){s.setEstimatedDate(w.datePickerInstance,u());w.composerTimelineTagger.switchToTagger('date');}});},listenToPublish:function(t,u){if(t.root)t=t.root;return h.subscribe('composer/publish',function(event,v){if(v.composer_id===t.id)i.loadModules(["TimelineStoryPublisher"],function(w){w.publish(v);u&&u();});});},listenToAnotherComposerOpen:function(t,u){return h.subscribe('composer/mutate',function(v,w){if(w!==t)u();});},listenToCancel:function(t,u){return g.listen(t,'click',function(event){if(m.byClass(event.getTarget(),"_306"))u();});},setEstimatedDate:function(t,u){var v,w;if(u&&j.hasClass(u,'fbTimelineCapsule')){v=u.getAttribute('data-start');w=u.getAttribute('data-end');if(v&&w){var x=new Date(w*1000),y=new Date();if(x>y){t.setDate(y.getFullYear(),y.getMonth()+1,y.getDate());}else if(w-v>2*q){t.setDate(x.getFullYear());}else t.setDate(x.getFullYear(),x.getMonth()+1);}return;}var z=m.byClass(u,'fbTimelineCapsule');if(z){v=z.getAttribute('data-start');w=z.getAttribute('data-end');var aa=o.getElementPosition(u).y,ba=[w,null],ca=[v,null],da=n.getUnitsWithTime(z);for(var ea=0;ea<da.length;ea++){var fa=da[ea],ga=k.scry(fa.parentNode,'.spinePointer')[0];if(!ga)continue;var ha=o.getElementPosition(ga).y;if(ha<=aa){if(!ba[1]||ha>ba[1])ba=[fa.getAttribute('data-time'),ha];}else if(!ca[1]||ha<ca[1])ca=[fa.getAttribute('data-time'),ha];}if(ba[0]!==null&&ca[0]!==null){var ia=Math.round((parseInt(ba[0],10)+parseInt(ca[0],10))/2)*1000;ia=Math.min(new Date()-r,ia);t.setDateWithTimestamp(ia);}}}};e.exports=s;},null);
__d("TimelineSection",["Arbiter","CSS","DOM","Parent","ScrollingPager","TimelineConstants","TimelineLegacySections","TimelineLoadState","TimelineScrubberKey","UIPagelet","TimelineSectionPager.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(s,t,u,v,w){"use strict";this.$TimelineSection0=s;this.$TimelineSection1=v;this.$TimelineSection2=t;this.$TimelineSection3=null;this.$TimelineSection4=null;this.$TimelineSection5=true;this.$TimelineSection6=true;this.$TimelineSection7=t!==o.RECENT_ACTIVITY;this.$TimelineSection8=w;this.$TimelineSection9=u;this.$TimelineSectiona={};this.$TimelineSectionb=false;this.$TimelineSectionc=[];this.$TimelineSectiond=false;this.$TimelineSectione=[];}r.prototype.load=function(s,t){"use strict";if(this.$TimelineSection1){this.activateContentScrollLoad();return;}var u=this.$TimelineSection9;g.inform(l.SECTION_LOADING,{data:u,scrubberKey:this.$TimelineSection2});this.$TimelineSection1=true;h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodSuppressed');var v='ProfileTimelineSectionPagelet',w=this.$TimelineSection2===o.WAY_BACK;if(w)v='ProfileTimelineRemainingYearsPagelet';var x=m.shouldForceNoFriendActivity();u=Object.assign({},u,{highlight_unit_data:s,parent_key:this.$TimelineSection3,force_no_friend_activity:x});h.addClass(this.$TimelineSection0,'fbTimelineSectionLoading');this.$TimelineSection5=false;this.activateContentScrollLoad();if(t){this.$TimelineSection0.style.minHeight=window.innerHeight+'px';g.subscribeOnce(l.SECTION_FULLY_LOADED,function(y,z){if(z.scrubberKey===this.$TimelineSection2){this.$TimelineSection0.style.minHeight='';m.destroyOnVisible(this.$TimelineSection2);}}.bind(this));}m.addLoadPagelet(this.$TimelineSection2,p.loadFromEndpoint(v,this.$TimelineSection0.id,u,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));m.collapsePlaceHolderHeaders();};r.prototype.preload=function(){"use strict";h.addClass(this.$TimelineSection0,'fbTimelineTimePeriodSuppressed');h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded');var s=i.find(this.$TimelineSection0,'span.sectionLabel');if(s.getAttribute('data-original-label')){i.setContent(s,s.getAttribute('data-original-label'));s.removeAttribute('data-original-label');}};r.prototype.unload=function(){"use strict";if(!this.$TimelineSection1||!this.$TimelineSection7)return;this.$TimelineSection1=false;m.cancelLoadPagelet(this.$TimelineSection2);h.addClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodSuppressed');if(this.$TimelineSection0.nextSibling&&h.hasClass(this.$TimelineSection0.nextSibling,'fbTimelineSection')){i.setContent(this.$TimelineSection0,this.$TimelineSection0.nextSibling);h.show(this.$TimelineSection0.firstChild);}else i.empty(this.$TimelineSection0);this.deactivateScrollLoad();};r.prototype.canScrollLoad=function(){"use strict";return this.$TimelineSection5;};r.prototype.activateScrollLoad=function(){"use strict";this.$TimelineSection5=true;h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodSuppressed');h.addClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded');var s=m.getOnVisible(this.$TimelineSection2);if(s)s.reset();return this;};r.prototype.deactivateScrollLoad=function(){"use strict";if(!this.$TimelineSection1){this.$TimelineSection5=false;h.removeClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded');h.addClass(this.$TimelineSection0,'fbTimelineTimePeriodSuppressed');var s=m.getOnVisible(this.$TimelineSection2);if(s)s.remove();}i.scry(this.$TimelineSection0,'.fbTimelineSectionExpandPager').forEach(function(t){var u=k.getInstance(t.id);u&&u.removeOnVisible();var v=j.byClass(t,'stat_elem');if(v)h.removeClass(v,'async_saving');});return this;};r.prototype.canContentScrollLoad=function(){"use strict";return this.$TimelineSection6;};r.prototype.activateContentScrollLoad=function(){"use strict";this.$TimelineSection6=true;var s=q.getInstance(this.$TimelineSection2);if(s)s.restoreOnVisible();return this;};r.prototype.deactivateContentScrollLoad=function(){"use strict";this.$TimelineSection6=false;var s=q.getInstance(this.$TimelineSection2);if(s)s.removeOnVisible();return this;};r.prototype.removeSectionPager=function(){"use strict";var s=q.getInstance(this.$TimelineSection2);if(s)s.unmount();return this;};r.prototype.getNode=function(){"use strict";return this.$TimelineSection0;};r.prototype.getScrubberKey=function(){"use strict";return this.$TimelineSection2;};r.prototype.getParentKey=function(){"use strict";return this.$TimelineSection3;};r.prototype.setParentKey=function(s){"use strict";this.$TimelineSection3=s;return this;};r.prototype.addSubSection=function(s,t){"use strict";if(!Array.isArray(this.$TimelineSection4))this.$TimelineSection4=[];if(Array.isArray(this.$TimelineSection4))this.$TimelineSection4[s]=t;return this;};r.prototype.getSubSections=function(){"use strict";return this.$TimelineSection4;};r.prototype.isLoaded=function(){"use strict";return this.$TimelineSection1;};r.prototype.isRightColumnFinished=function(){"use strict";return this.$TimelineSectionb;};r.prototype.setRightColumnFinished=function(){"use strict";this.$TimelineSectionb=true;return this;};r.prototype.getHistoricUnitCount=function(){"use strict";return this.$TimelineSection8;};r.prototype.setExpandLoadData=function(s){"use strict";this.$TimelineSectiona=s;return this;};r.prototype.expand=function(s){"use strict";if(!this.$TimelineSection1)return this;var t=i.find(this.$TimelineSection0,'.fbTimelineSectionExpander');h.addClass(t.firstChild,'async_saving');s&&h.addClass(s,'async_saving');g.inform(l.SECTION_EXPAND,this.$TimelineSection2);i.scry(this.$TimelineSection0,'.fbTimelineCapsule').forEach(i.remove);this.$TimelineSectiona.new_expand=true;m.cancelLoadPagelet(this.$TimelineSection2);m.addLoadPagelet(this.$TimelineSection2,p.loadFromEndpoint('ProfileTimelineSectionPagelet',t.id,this.$TimelineSectiona,{usePipe:true,jsNonblock:true,constHeight:true}));return this;};r.prototype.isPermalinkPeriod=function(){"use strict";return !!this.$TimelineSection9.is_permalink_period;};r.prototype.isHidden=function(){"use strict";return this.$TimelineSectiond;};r.prototype.hide=function(){"use strict";this.$TimelineSectiond=true;h.hide(i.find(this.$TimelineSection0,'.fbTimelineSection'));return this;};r.prototype.isHiddenFromView=function(){"use strict";return (!this.$TimelineSection1||this.$TimelineSectiond||h.hasClass(this.$TimelineSection0,'fbTimelineTimePeriodUnexpanded'));};r.prototype.hasPendingCallbacks=function(){"use strict";return this.$TimelineSectionc.length>0;};r.prototype.queueDisplayCallback=function(s,t){"use strict";this.$TimelineSectionc[s]=t;return this;};r.prototype.runPendingDisplayCallbacks=function(){"use strict";while(this.hasPendingCallbacks()){var s=this.$TimelineSectionc.shift();if(s)s();}return this;};r.prototype.setPageLoadStatus=function(s,t){"use strict";this.$TimelineSectione[s]=t;return this;};r.prototype.getPageLoadStatus=function(s){"use strict";if(this.$TimelineSectione[s]===(void 0))this.$TimelineSectione[s]=n.NOT_LOADED;return this.$TimelineSectione[s];};e.exports=r;},null);
__d("TimelineContentLoader",["Arbiter","CSS","DOM","DOMScroll","Event","OnVisible","Parent","ScrollingPager","setImmediate","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineDOMID","TimelineLegacySections","TimelineScrubberKey","TimelineSection","TimelineQueryDataStore","TimelineSmartInsert","Vector","$","arrayContains","createArrayFromMixed","csx","debounce","ge","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=false,ha=null,ia={},ja={},ka=[],la={},ma=null,na=null,oa=null,pa=80,qa=250,ra=500;function sa(){if(ga)return;r.register(p.CONTENT,ya);na=g.subscribe(q.SECTION_EXPAND,function(za,ab){ya.navigateToSection(ab);});oa=w.addRetroactiveListener('section_finished',va);ga=true;}var ta=da(function(za,ab,bb){var cb=t.get(za).getHistoricUnitCount();ab-=cb;bb-=1;if(cb==-1||bb<=0||ab<0)return;var db=ya.getNextSectionKey(za);if(db){t.get(db).load();ta(db,ab,bb);}},ra);function ua(za,ab){if(!ab)ab=0;if(ab<pa&&!za())setTimeout(ua.bind(null,za,ab+1),qa);}function va(za){ua(function(){if(za===u.WAY_BACK)return true;var ab=ya.getNextSectionKey(za);if(ab){xa(ab);return true;}return false;});}function wa(za,ab,bb){ua(function(){if(ab===u.WAY_BACK)return true;var cb=ya.getNextSectionKey(ab);if(cb){t.addOnVisible(cb,new l(za,xa.bind(null,cb),false,bb||1000));return true;}return false;});}function xa(za){var ab=t.get(za);if(ab&&ab.canScrollLoad()){ab.load();if(ma)ta(za,ma.required_units,ma.max_parallelism);}}var ya={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(za,ab,bb,cb,db,eb,fb){sa();if(aa(ka,ab))return;if(ja)Object.assign(bb||{},ja);var gb=new v(za,ab,bb,cb,fb);if(!db){t.setMainSectionOrder(ab,eb);ia[ab]=true;}else{gb.setParentKey(db);var hb=t.get(db);if(hb)hb.addSubSection(eb,gb);}t.set(ab,gb);ya.checkCurrentSectionChange();g.inform(q.SECTION_REGISTERED,{scrubberKey:ab,section:gb});},reset:function(){t.removeAllOnVisibles();t.cancelLoadPagelets();for(var za in la){la[za].unsubscribe();delete la[za];}na&&na.unsubscribe();na=null;oa&&oa.remove();oa=null;t.removeAll();ha=null;ia={};ja={};ka=[];ga=false;},checkCurrentSectionChange:function(){var za=null;fa(function(){za=ya.getCurrentSection();},function(){var ab=ha&&ha.getScrubberKey();if(za&&za.getScrubberKey()!==ab&&!za.isPermalinkPeriod()){ha=za;var bb=za.getScrubberKey(),cb=za.getParentKey();if(!cb){cb=bb;bb=null;}r.sectionHasChanged(cb,bb);}});},setParallelLoadConfig:function(za){ma=za;},getCurrentSection:function(){var za={},ab=t.getAll();for(var bb in ab){var cb=ab[bb];if(!cb||cb.isHiddenFromView())continue;var db=y.getElementPosition(cb.getNode(),'viewport').y;if(cb.getScrubberKey()===u.RECENT_ACTIVITY)db--;if(db<ya.CURRENT_SECTION_OFFSET)za[db]=cb;}var eb=Math.max.apply(null,Object.keys(za)),fb=t.getMainSectionOrder(),gb=eb==-Infinity;if(!gb){return za[eb];}else if(fb[0])return t.get(fb[0]);return null;},getLastVisibleSection:function(){var za=t.getMainSectionOrder();for(var ab=za.length-1;ab>=0;ab--){var bb=t.get(za[ab]);if(bb&&!bb.isHiddenFromView())return bb;}return null;},getRecentActivitySection:function(){return t.get(u.RECENT_ACTIVITY);},capsuleForCurrentSection:function(){var za=ya.getCurrentSection();return za&&i.scry(za.getNode(),'.fbTimelineCapsule')[0];},enableScrollLoad:function(za,ab,bb,cb){za=z(za);var db=m.byClass(za,'fbTimelineSection')||za.parentNode,eb=db&&i.scry(db,'.fbTimelineCapsule')[0];if(!eb)return;if(bb===null){wa(za,ab,cb);}else r.runOnceWhenSectionFullyLoaded(wa.bind(null,za,ab,cb),ab,bb);},expandSectionOnClick:function(za,ab){k.listen(za,'click',function(bb){bb.prevent();t.get(ab).expand();});},expandSubSectionsOnClick:function(za,ab){k.listen(za,'click',function(bb){bb.prevent();t.cancelLoadPagelet(ab);var cb=t.get(ab),db=cb.getSubSections();if(db&&db.length)ya.navigateToSection(db[0].getScrubberKey());});},getNextSectionKey:function(za){var ab=t.getMainSectionOrder();for(var bb=0;bb<ab.length-1;bb++)if(ab[bb]==za){while(bb<ab.length-1&&!ab[bb+1])bb++;return ab[bb+1];}var cb=t.get(za);if(!cb||!cb.getParentKey())return;var db=t.get(cb.getParentKey());if(!db)return;var eb=db.getSubSections(),fb=eb[eb.length-1];if(cb.getScrubberKey()===fb.getScrubberKey())return ya.getNextSectionKey(cb.getParentKey());for(var gb=0;gb<eb.length-1;gb++)if(eb[gb].getScrubberKey()==za)return eb[gb+1].getScrubberKey();},hideSection:function(za){var ab=t.get(za);if(ab)ab.hide();var bb=r.getCurrentScrubber();if(bb){var cb=null;if(!ia[za]){cb=r.getCurrentScrubber().getSubnav(ab.getParentKey(),za);}else cb=r.getCurrentScrubber().getNav(za);cb&&h.hide(cb);}var db=r.getCurrentStickyHeaderNav();db&&db.removeTimePeriod(za);},loadSectionOnClick:function(za,ab){k.listen(za,'click',function(bb){bb.prevent();t.get(ab).load();});},removeSection:function(za){t.removeOnVisible(za);t.remove(za);delete ia[za];var ab=r.getCurrentStickyHeaderNav();ab&&ab.removeTimePeriod(za);ka.push(za);},removeSectionParent:function(za){i.remove(z(za).parentNode);},navigateToSection:function(za,ab,bb){ab=!!ab;var cb=za,db=t.get(za);if(!db)return;if(!db.isLoaded()){x.enable();i.scry(z(s.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(i.remove);}if(!ia[za]){if(!db.isLoaded())db.getNode().style.minHeight=y.getViewportDimensions().y+'px';var eb=g.subscribe(q.SECTION_FULLY_LOADED,function(ob,pb){if(pb.scrubberKey===za){db.getNode().style.minHeight='';eb.unsubscribe();}});cb=db.getParentKey();var fb=t.get(cb);if(fb){var gb=fb.getNode();fb.removeSectionPager();if(!h.hasClass(gb,'fbTimelineSectionExpanded')){j.scrollTo(gb,0);h.addClass(gb,'fbTimelineSectionExpanded');i.scry(gb,'.fbTimelineCapsule').forEach(i.remove);i.scry(gb,'div.fbTimelineSectionExpandPager').forEach(i.remove);i.scry(gb,'div.fbTimelineContentHeader').forEach(i.remove);i.scry(gb,"._5vf").forEach(function(ob){if(!ob.getAttribute('data-subsection'))i.remove(ob);});}}var hb=ya.getNextSectionKey(cb),ib=t.getOnVisible(hb);if(ib)ib.setBuffer(0);}var jb=t.getMainSectionOrder();for(var kb=0;kb<jb.length;kb++){var lb=jb[kb];if(!lb)continue;if(lb==cb)break;t.get(lb).deactivateScrollLoad().deactivateContentScrollLoad();}db.load(bb,true);t.collapsePlaceHolderHeaders();var mb=y.getScrollPosition().x,nb=y.getElementPosition(db.getNode()).y;if(!ab)j.scrollTo(new y(mb,nb-q.SCROLL_TO_OFFSET,'document'),true,false,false,0,function(){var ob=y.getElementPosition(db.getNode()).y;j.scrollTo(new y(mb,ob-q.SCROLL_TO_OFFSET,'document'),false);if(za!==u.RECENT_ACTIVITY){var pb=i.scry(db.getNode(),'h3.uiHeaderTitle')[0];if(pb){pb.tabIndex=0;pb.focus();}}});},appendContentAfterLoad:function(za,ab,bb){r.runOnceWhenSectionFullyLoaded(i.appendContent.bind(null,z(za),ab),bb,'0');},markSectionAsLoaded:function(za,ab,bb){r.runOnceWhenSectionFullyLoaded(function(){ea(za)&&h.removeClass(z(za).parentNode,'fbTimelineSectionLoading');},ab,bb);},scrollToTimeline:function(za,ab){r.runOnceWhenSectionFullyLoaded(function(){var bb=z('fbTimelineHeadline');o(function(){j.scrollTo(bb);});},za,ab);},suppressSectionsAbove:function(za){var ab,bb,cb=t.getMainSectionOrder();for(var db=0;db<cb.length;db++){var eb=cb[db];if(!eb)continue;ab=t.get(eb).getNode();bb=null;if(ba(za.parentNode.children).indexOf(za)<=ba(ab.parentNode.children).indexOf(ab)){bb=eb;break;}t.get(eb).deactivateScrollLoad();}if(bb)ya.navigateToSection(bb,true);},forceNoFriendActivity:function(){t.forceNoFriendActivity();},removeDupes:function(za){var ab=ea(za);if(!ab)return;var bb=i.scry(ab,'li.fbTimelineUnit'),cb={};for(var db=0;db<bb.length;db++){var eb=bb[db];if(eb.id&&eb.id.startsWith('tl_unit_')){var fb=eb.id.substring(8,eb.id.length),gb=i.scry(eb,'div.timelineUnitContainer');if(gb.length>0)fb=fb+gb[0].getAttribute('data-time');if(cb.hasOwnProperty(fb)){eb.id='dupe_unit_'+Math.random();eb.className="hidden_elem";}else cb[fb]=1;}}},removeLoadingState:function(za){ea(za)&&h.removeClass(z(za),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(za,ab){var bb=t.get(za);bb&&bb.setExpandLoadData(ab);},updatePagerAfterLoad:function(za,ab,bb,cb,db){var eb=n.getInstance(za.firstChild.id);if(!eb){la[za.firstChild.id]=g.subscribe(n.REGISTERED,function(gb,hb){la[za.firstChild.id].unsubscribe();delete la[za.firstChild.id];if(hb.id===za.firstChild.id)ya.updatePagerAfterLoad(za,ab,bb,cb,db);});return;}var fb=eb.getHandler();eb.setHandler(function(gb){h.addClass(za,'async_saving');fb(gb);});r.runOnceWhenSectionFullyLoaded(function(){h.removeClass(za,'fbTimelineHiddenPager');eb.checkBuffer();},bb,cb);if(db)r.runOnceWhenSectionFullyLoaded(r.adjustScrollingPagerBuffer.bind(null,za.firstChild.id,bb),bb,cb);},repositionDialog:function(za){g.subscribe(q.SECTION_LOADED,function(){za.updatePosition();});},rightColumnFinished:function(za){var ab=t.get(za);ab.setRightColumnFinished();},addUnrankedUnits:function(za){var ab=z(za),bb=i.scry(ab,'li.fbTimelineUnit');for(var cb=bb.length-1;cb>=0;cb--){var db=bb[cb];i.insertAfter(ab,db);h.addClass(i.find(db,'div.timelineUnitContainer'),'fbTimelineHighlightUnit');}i.remove(ab);},addUnrankedStories:function(za){var ab=z(za),bb=i.scry(ab,"._5pat");for(var cb=bb.length-1;cb>=0;cb--){var db=bb[cb];i.insertAfter(ab,db);}i.remove(ab);g.inform('Timeline/unrankedStoriesLoaded');}};e.exports=ya;},null);
__d("TimelineLogging",["TimelineComponentKeys","TimelineController","reportData"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=false,k=0,l=null,m=null,n={init:function(o){if(j)return;k=o;h.register(g.LOGGING,this);},reset:function(){j=false;k=0;l=null;},log:function(o,p){p.profile_id=k;i(o,{gt:p});},logSectionChange:function(o,p){var q={timeline_section_change:1,key:o};if(l&&o==l){q.timeline_scrubber=1;l=null;}if(m&&o==m){q.sticky_header_nav=1;m=null;}n.log('timeline',q);},logScrubberClick:function(o){l=o;},logStickyHeaderNavClick:function(o){m=o;}};e.exports=n;},null);
__d("TimelineStickyHeaderComposerX",["Arbiter","Bootloader","ComposerXController","CSS","DOMQuery","Event","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","csx","cx","getElementText","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();function w(y){return y&&y.getContext&&m.byClass(y.getContext(),"_2wp");}function x(y){"use strict";this._composerRoot=y;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),g.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),g.subscribe('TimelineMLE/mleFlyoutShown',function(z,aa){if(w(aa)===this._composerRoot)i.reset(this._composerRoot);}.bind(this)),g.subscribe('composer/initializedAttachment',function(z,aa){if(aa.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!aa.isInitial)this._closeMLE();}else this._close();}.bind(this)),g.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}x.prototype._toggleNarrowMode=function(event,y){"use strict";h.loadModules(["Tooltip"],function(z){var aa;v(function(){aa=r.getElementDimensions(y).x>400;},function(){var ba=k.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",aa);for(var ca=0;ca<ba.length;ca++){var da=ba[ca],ea=u(da);if(aa){z.set(da,ea);}else z.remove(da);}}.bind(this));}.bind(this));return false;};x.prototype._registerClickToDismiss=function(){"use strict";var y=j.hasClass(k.find(this._composerRoot,"._yq"),"_519b");if(!y){this._clearClickDismissToken();return;}this._clickDismissToken=l.listen(document.body,'click',function(z){var aa=m.byClass(z.getTarget(),"_2wp");if(!aa){this._close();this._clearClickDismissToken();}}.bind(this));};x.prototype._clearClickDismissToken=function(){"use strict";if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}};x.prototype._close=function(){"use strict";this._clearClickDismissToken();this._closeMLE();i.reset(this._composerRoot);};x.prototype._closeMLE=function(){"use strict";h.loadModules(["TimelineMLE"],function(y){var z=y.getFlyout();if(w(z)===this._composerRoot)y.hideFlyout();}.bind(this));};e.exports=x;},null);
__d("TimelineSpinelessComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","Run","TimelineComposer","TimelineComposerUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m;function n(){i.logCompleted(m.id);}function o(q){if(q.hidePost){n();return;}if(!q.streamStory){window.location.reload();return;}if(q.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(r){r.publish(q);});n();return;}k.renderCapsuleBasedStory(m,q.streamStory);n();}var p={init:function(q){m=q;var r=g.subscribe('composer/publish',function(event,s){if(s.composer_id===m.id)o(s);});j.onLeave(r.unsubscribe.bind(r));}};e.exports=p;},null);
__d("TimelineStickyColumn",["Arbiter","CSS","DOMQuery","Event","Run","Style","TimelineConstants","TimelineContentLoader","UITinyViewportAction","Vector","csx","queryThenMutateDOM","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=100,u=15,v=15,w=35,x="._2t4u",y="._5nb8",z="._2t4v",aa=false,ba={},ca=null,da=null,ea=null,fa,ga,ha,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa;function qa(){var ib;s('PhotoSnowlift',function(jb){return ib=jb;});return !!ib&&ib.getInstance().isOpen;}function ra(){if(qa())return;fa=n.getCurrentSection();ga=n.getRecentActivitySection();if(!fa||!fa.isRightColumnFinished())return;var ib,jb;if(ba.hasDecoupledColumns){ib=cb(ga);jb=ab(ga);}else{jb=ab(fa);ib=bb(fa);}ia=ib?ib.offsetHeight:0;ja=jb?jb.offsetHeight:0;ka=p.getViewportDimensions().y;oa=ib?p.getElementPosition(ib).y:0;ha=n.getLastVisibleSection();la=fa.getNode().offsetHeight;pa=document.body.clientWidth<document.body.scrollWidth;}function sa(){if(!ba.hasDecoupledColumns&&fa)return fa.isRightColumnFinished();if(ga&&fa===ga&&ma>=na)return ga.isRightColumnFinished();return true;}function ta(){if(!fa||qa())return;if(!ba.hasDecoupledColumns&&ea&&ea!==fa){var ib=ab(ea);if(ib)db(ib,'','','');}na=ma;ma=p.getScrollPosition().y;var jb;if(ba.hasDecoupledColumns){jb=ab(ga);}else jb=ab(fa);if(!jb)return;if(pa){db(jb,'','','');return;}if(sa()){ua(jb);ea=xa(jb)==='fixed'?fa:null;}}function ua(ib){if(ja>=ia||ia<=ka)return;var jb=oa-eb();if(ma<=jb){db(ib,'','','');return;}var kb=v+w,lb=ma+ka-kb,mb=ma+ja+eb(),nb=oa+la;if(fa===ha)nb+=w;if(!ba.hasDecoupledColumns&&nb<=Math.min(mb,lb)){db(ib,'absolute','',v+'px');return;}var ob=ka-v-eb();if(ja<=ob){db(ib,'fixed',eb()+'px','');return;}if(ma<na){va(ib);}else wa(ib);}function va(ib){var jb=false;if(xa(ib)==='absolute'){var kb=oa+ia-eb(),lb=ma+eb()-oa;if(!!za(ib)&&lb<=za(ib)){jb=true;}else if(ib.style.bottom!==''&&ma<=kb-ja)jb=true;}if(jb){db(ib,'fixed',eb()+'px','');return;}if(xa(ib)==='absolute'&&!!za(ib))return;if(ya(ib)){if(za(ib)>=eb())return;var mb=ka-w,nb=ma-oa-(ja-mb);if(na)nb+=na-ma;db(ib,'absolute',nb+'px','');return;}}function wa(ib){var jb,kb=false;if(!ya(ib)){jb=za(ib);var lb=ma+ka,mb=oa+jb+ja+w;if(lb>=mb)kb=true;}if(!kb)if(ma===na||!ya(ib))return;if(kb){jb=ka-ja-v-w;db(ib,'fixed',jb+'px','');return;}if(ya(ib)&&za(ib)>=eb()){jb=ma-oa+eb();if(na)jb+=na-ma;db(ib,'absolute',jb+'px','');}}function xa(ib){switch(ib.style.position){case 'absolute':case 'static':return ib.style.position;default:return h.hasClass(ib,'fixed_always')?'fixed':'static';}}function ya(ib){switch(xa(ib)){case 'absolute':case 'static':return false;default:return true;}}function za(ib){return ib.style.top?parseInt(ib.style.top,10):0;}function ab(ib){if(ib)return i.scry(ib.getNode(),z)[0];return null;}function bb(ib){if(ib)return i.scry(ib.getNode(),x)[0];return null;}function cb(ib){if(ib)return i.scry(ib.getNode(),y)[0];return null;}function db(ib,jb,kb,lb){l.set(ib,'bottom',lb);if(jb==='fixed'){h.addClass(ib,'fixed_always');l.set(ib,'position','');}else{h.removeClass(ib,'fixed_always');l.set(ib,'position',jb);}l.set(ib,'top',kb);g.inform('reflow');}function eb(){return o.isTiny()?u:t;}function fb(){r(ra,ta);}function gb(){aa=false;ea=null;while(ca&&ca.length)ca.pop().remove();ca=null;if(da)da.unsubscribe();}var hb={init:function(ib){if(!aa){aa=true;ba=ib;ca=[j.listen(window,'scroll',fb),j.listen(window,'resize',fb)];da=g.subscribe(m.SECTION_FULLY_LOADED,fb);k.onLeave(gb);}},adjust:function(){if(aa){ra();ta();}}};e.exports=hb;},null);
__d("TimelineViewportTracking",["Arbiter","Banzai","DOM","TimelineSeenStateConstants","TimelineViewportTrackingLogType","ViewportTracking","$","csx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p;for(var q in l)if(l.hasOwnProperty(q))s[q]=l[q];var r=l===null?null:l.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=l;function s(){"use strict";if(l!==null)l.apply(this,arguments);}s.prototype.getAllStories=function(){"use strict";var t=i.scry(this.getStream(),"._5pat"),u=[];for(var v=0;v<t.length;v++)if(this.getStoryID(t[v]))u.push(t[v]);return u;};s.prototype.getStream=function(){"use strict";if(!this.$TimelineViewportTracking0)this.$TimelineViewportTracking0=m('timeline_tab_content');return this.$TimelineViewportTracking0;};s.prototype.getStoryID=function(t){"use strict";var u=JSON.parse(t.getAttribute('data-ft')),v=j.FT_TIMELINE_HASH_IDENTIFIER_KEY;return u[v];};s.prototype.getDataToLog=function(t){"use strict";var u=JSON.parse(t.getAttribute('data-ft'));return {ft:u,log_type:k.IMPRESSION};};s.prototype.getTimetrackingDataToLog=function(t){"use strict";var u=r.getTimetrackingDataToLog.call(this,t);u.log_type=k.DURATION;return u;};s.prototype.sendDataToLog=function(t,u,v,w){"use strict";if(!u.ft)return;var x={};if(w)x.retry=w;if(v)x.delay=2000;h.post('timeline_feed_tracking',u,x);};s.prototype.getDataFromConfig=function(t){"use strict";this.timeout=t.record_delay;this.isSeenStateLoggingEnabled=t.is_seen_state_logging_enabled;this.isTimetrackingEnabled=t.is_timetracking_enabled;this.vpvdDebug=!!t.vpvd_debug;o(g.subscribe(['TimelineConstants/unitSegmentLoaded','Timeline/unrankedStoriesLoaded'],function(){this.invalidateAllStoriesCache();this.invalidateVisibleStoriesCache();}.bind(this)));};s.prototype.getTimeout=function(){"use strict";return this.timeout;};s.prototype.cleanup=function(){"use strict";p=null;r.cleanup.call(this);};e.exports={getInstance:function(){return p;},init:function(t){if(p)return;p=new s();p.init(t);}};},null);