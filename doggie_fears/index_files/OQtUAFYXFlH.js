/*!CK:665559298!*//*1435672673,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ABhc7"]); }

__d("MachineTranslationScore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNDEFINED:0,VERY_BAD:1,BAD:2,OK:3,GOOD:4,VERY_GOOD:5};},null);
__d("TranslationPreferenceEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CLICK_SEE_ORIGINAL:"click_see_original",CLICK_HIDE_ORIGINAL:"click_hide_original",CLICK_TRANSLATION_PREFERENCES:"click_translation_preferences"};},null);
__d("ULMOverrideTrigger",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={OVERRIDE_TOOL:"ULM override tool",NEVER_TRANSLATE_PREFERENCE:"never translate",UNDO_NEVER_TRANSLATE_PREFERENCE:"undo never translate"};},null);
__d("ContentTranslationStrings",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={AUTOMATICALLY_TRANSLATED:g._("Automatically Translated"),TRANSLATED_BY_BING:g._("Translated by Bing"),PARTLY_TRANSLATED_BY_BING:g._("Partly translated by Bing"),HIDE_ORIGINAL:g._("Hide Original"),SEE_ORIGINAL:g._("See Original"),REPORT_LANGUAGE_DIALOG_TY:g._("Thank you for letting us know about this error. Your feedback improves translation for everyone on Facebook."),NEVER_TRANSLATE_UNDO:g._("Click here to undo."),UNDO:g._("Undo"),NUX_MESSAGE:g._("This post has been translated into your language. Click here to choose your translation preferences."),getTranslatedFromTo:function(i,j){return (g._("Translated from {source language} to {target language}",[g.param("source language",i),g.param("target language",j)]));},getReportLanguageDialogHeader:function(i){return (g._("This wasn't in {language}",[g.param("language",i)]));},getReportLanguage:function(i){return (g._("Post was not in {language}",[g.param("language",i)]));},getNeverTranslate:function(i){return (g._("Never Translate {language}",[g.param("language",i)]));},getNeverTranslateDialog:function(i){return (g._("Posts in {language} won't be translated for you.",[g.param("language",i)]));}};e.exports=h;},null);
__d("LtgScoreFeedbackButton.react",["LayerFadeOnHide","React","BanzaiLogger","ReactLayeredComponentMixin","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","XUIGrayText.react","MachineTranslationScore","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=h,s=r.PropTypes,t={};t[o.VERY_BAD]=q._("Very bad.");t[o.BAD]=q._("Bad.");t[o.OK]=q._("OK.");t[o.GOOD]=q._("Good.");t[o.VERY_GOOD]=q._("Very good.");var u={};u[o.VERY_BAD]=q._("I can't understand anything.");u[o.BAD]=q._("I can't understand most of this.");u[o.OK]=q._("I can understand enough of this.");u[o.GOOD]=q._("I can understand most of this.");u[o.VERY_GOOD]=q._("I can understand everything.");var v=[o.VERY_BAD,o.BAD,o.OK,o.GOOD,o.VERY_GOOD],w=h.createClass({displayName:"LtgScoreFeedbackButton",mixins:[j],propTypes:{feedbackTargetID:s.string,text:s.string,translation:s.string,authorID:s.string,sourceLocale:s.string,targetLocale:s.string,originalConfidence:s.number,scaledConfidence:s.number,translationTrigger:s.string,translationID:s.string,viewerID:s.number,fbtypeEnum:s.number,systemID:s.string},getInitialState:function(){return {score:this.props.scaledConfidence,defaultScore:this.props.scaledConfidence,hasDefaultPosition:true,hoverScore:o.BAD,hasHoverState:false,hasFeedbackConfirmation:false};},renderDefaultTooltipDialogBody:function(){return (h.createElement(l,null,h.createElement(n,{shade:"dark",size:"small",weight:"bold"},t[this.state.hoverScore]),h.createElement(n,{shade:"dark",size:"small"}," "+u[this.state.hoverScore])));},renderTooltipAfterUserFeedbackDialogBody:function(){return (h.createElement(l,null,h.createElement(n,{shade:"dark",size:"small"},q._("You rated this:")+" "),h.createElement(n,{shade:"dark",size:"small",weight:"bold"},t[this.state.score]),h.createElement(n,{shade:"dark",size:"small"}," "+q._("Thanks for helping us make this better."))));},onSlotClick:function(x,event){if(this.state.hasDefaultPosition||x!=this.state.score){this._logUserRating(x);this.setState({hasDefaultPosition:false,score:x,hasFeedbackConfirmation:true});setTimeout(function(){this.setState({hasFeedbackConfirmation:false});}.bind(this),1500);}},onSlotMouseEnter:function(x,event){this.setState({hasHoverState:true,hoverScore:x});},onSlotMouseLeave:function(x,event){this.setState({hasHoverState:false});},getRefNameByScore:function(x){return "scores-button-slot-"+x;},renderLayers:function(){var x=this.getRefNameByScore(this.state.hoverScore);return {tooltipDialog:h.createElement(k,{hoverContext:h.findDOMNode(this.refs[x]),shown:this.state.hasHoverState,contextRef:function(){return this.refs[x];}.bind(this),position:"below",width:250},h.createElement(m,null,h.createElement(n,{shade:"medium",size:"small",display:"block"},q._("Rate This Translation"))),this.state.hasDefaultPosition?this.renderDefaultTooltipDialogBody():this.renderTooltipAfterUserFeedbackDialogBody()),hasFeedbackConfirmationDialog:h.createElement(k,{contextRef:function(){return this.refs['scores-button'];}.bind(this),shown:this.state.hasFeedbackConfirmation,position:"above",behaviors:{LayerFadeOnHide:g}},h.createElement(m,null,h.createElement(n,{shade:"medium",size:"small",display:"block"},q._("Success!"))),h.createElement(l,null,h.createElement(n,{shade:"dark",size:"small",display:"block"},q._("Thank you for the feedback"))))};},renderSlot:function(x,y){var z=(("_5mln")+(y<=x?' '+"_5mlo":''));return (h.createElement("div",{ref:this.getRefNameByScore(y),className:z,key:'slot_'+y,onClick:this.onSlotClick.bind(this,y),onMouseEnter:this.onSlotMouseEnter.bind(this,y),onMouseLeave:this.onSlotMouseLeave.bind(this,y)}));},render:function(){var x=this.state.hasHoverState?this.state.hoverScore:this.state.score,y=(("_5mlr")+(!this.state.hasDefaultPosition?' '+"_5mls":''));return (h.createElement("div",{className:y,ref:"scores-button"},v.map(this.renderSlot.bind(this,x))));},_logUserRating:function(x){i.log('LtgTranslationUserFeedbackLoggerConfig',{translation_id:this.props.translationID,viewer_id:this.props.viewerID,fbid:this.props.feedbackTargetID,fbtype_enum:this.props.fbtypeEnum,author_id:this.props.authorID,translation_trigger:this.props.translationTrigger,content_locale:this.props.sourceLocale,target_locale:this.props.targetLocale,system_id:this.props.systemID,input_text:this.props.text,translated_text:this.props.translation,original_translation_confidence:this.props.originalConfidence,scaled_translation_confidence:this.props.scaledConfidence,user_rating:x});}});e.exports=w;},null);
__d("XLtgTranslationNUXController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/translation_preferences\/nux\/",{});},null);
__d("XLtgNeverTranslatePreferenceController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/translation_preferences\/never_translate\/",{locale:{type:"String",required:true},event_trigger:{type:"Enum",required:true,enumType:1}});},null);
__d("LtgNeverTranslatePreference.react",["AsyncRequest","ContentTranslationStrings","React","ULMOverrideTrigger","XLtgNeverTranslatePreferenceController","Link.react","SimpleXUIDialog","XUIDialogButton.react","XUIDialogOkayButton.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=i,s=r.PropTypes,t=i.createClass({displayName:"LtgNeverTranslatePreference",propTypes:{onPreferenceClick:s.func.isRequired,sourceLocale:s.string.isRequired,sourceLocaleName:s.string.isRequired},render:function(){return (i.createElement(l,{className:"_5qpb",onClick:this._onNeverTranslateClick},h.getNeverTranslate(this.props.sourceLocaleName)));},_onNeverTranslateClick:function(){this._sendNeverTranslateRequest(j.NEVER_TRANSLATE_PREFERENCE,this._onConfirm);this.props.onPreferenceClick();},_sendNeverTranslateRequest:function(u,v){new g().setURI(k.getURIBuilder().setString('locale',this.props.sourceLocale).setEnum('event_trigger',u).getURI()).setHandler(function(w){if(this.isMounted()&&w.payload.success)v();}.bind(this)).send();},_onConfirm:function(){m.showEx(h.getNeverTranslateDialog(this.props.sourceLocaleName),h.getNeverTranslate(this.props.sourceLocaleName),i.createElement("div",null,i.createElement(n,{action:"cancel",label:h.UNDO,onClick:this._onUndoClick,use:"default"}),i.createElement(o,{action:"cancel",use:"confirm"})));},_onUndoClick:function(){this._sendNeverTranslateRequest(j.UNDO_NEVER_TRANSLATE_PREFERENCE,q);}});e.exports=t;},null);
__d("LtgReportLanguageTranslationPreference.react",["BanzaiLogger","ContentTranslationStrings","React","ReactComponentWithPureRenderMixin","Link.react","SimpleXUIDialog","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=i,o=n.PropTypes,p=i.createClass({displayName:"LtgReportLanguageTranslationPreference",mixins:[j],propTypes:{feedbackTargetID:o.string.isRequired,isShown:o.bool.isRequired,onPreferenceClick:o.func.isRequired,sourceLocale:o.string.isRequired,sourceLocaleName:o.string.isRequired,text:o.string.isRequired},render:function(){if(!this.props.isShown)return null;return (i.createElement(k,{onClick:this._handleReportLanguageClick,className:"_5qpb"},h.getReportLanguage(this.props.sourceLocaleName)));},_handleReportLanguageClick:function(){this._reportAndShowConfirmation();this.props.onPreferenceClick();},_reportAndShowConfirmation:function(){this._logReportLanguage();l.show(h.REPORT_LANGUAGE_DIALOG_TY,h.getReportLanguageDialogHeader(this.props.sourceLocaleName));},_logReportLanguage:function(){g.log('LtgLanguageFeedbackLoggerConfig',{fbid:this.props.feedbackTargetID,text:this.props.text,detected_locale:this.props.sourceLocale});}});e.exports=p;},null);
__d("LtgTranslationDropdownMenu.react",["ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","LayerHideOnBlur","LayerFadeOnHide","React","XUIContextualDialog.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k.createClass({displayName:"LtgTranslationDropdownMenu",render:function(){var o=this.props,p=o.children,q=(function(r,s){var t={},u=Object.prototype.hasOwnProperty;if(r==null)throw new TypeError();for(var v in r)if(u.call(r,v)&&!u.call(s,v))t[v]=r[v];return t;})(o,{children:1});return (k.createElement(l,k.__spread({behaviors:{ContextualLayerAutoFlip:g,ContextualLayerUpdateOnScroll:h,LayerHideOnBlur:i,LayerFadeOnHide:j}},q),k.createElement("div",{className:"_4d4g"},p)));}});e.exports=n;},null);
__d("LtgTranslationPreferencesDropdown.react",["AsyncRequest","ContentTranslationStrings","React","ReactComponentWithPureRenderMixin","ReactLayeredComponentMixin","UFITranslationConstants","BanzaiLogger","TranslationPreferenceEvent","XLtgTranslationNUXController","Link.react","LtgNeverTranslatePreference.react","LtgReportLanguageTranslationPreference.react","LtgTranslationDropdownMenu.react","XUIAmbientNUX.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=i,w=v.PropTypes,x=i.createClass({displayName:"LtgTranslationPreferencesDropdown",mixins:[k,j],getInitialState:function(){return {isShowingNux:this.props.shouldShowNux,isShown:false};},propTypes:{feedbackTargetID:w.string.isRequired,isShowingOriginal:w.bool.isRequired,shouldShowNux:w.bool,shouldShowPreferences:w.bool.isRequired,sourceLocale:w.string.isRequired,sourceLocaleName:w.string.isRequired,targetLocaleName:w.string.isRequired,text:w.string.isRequired,translationApp:w.string},getDefaultProps:function(){return {shouldShowNux:false,translationApp:l.FB_TRANSLATOR_APP};},componentDidMount:function(){this._onNUXMount();},render:function(){var y=this._getAttributionText();return this.props.shouldShowPreferences?i.createElement(p,{ref:"translationAttributionLink",onClick:this._handleLinkClick},y):i.createElement("span",null,y);},renderLayers:function(){return {contextualDialog:i.createElement(s,{context:i.findDOMNode(this.refs.translationAttributionLink),onToggle:function(y){return this._handleToggle(y);}.bind(this),position:"below",shown:this.state.isShown},i.createElement("div",{className:"_jju"},h.getTranslatedFromTo(this.props.sourceLocaleName,this.props.targetLocaleName)),i.createElement(q,{onPreferenceClick:this._handleLinkClick,sourceLocale:this.props.sourceLocale,sourceLocaleName:this.props.sourceLocaleName}),i.createElement(r,{feedbackTargetID:this.props.feedbackTargetID,isShown:this.props.isShowingOriginal,onPreferenceClick:this._handleLinkClick,sourceLocale:this.props.sourceLocale,sourceLocaleName:this.props.sourceLocaleName,text:this.props.text})),preferencesNUX:i.createElement(t,{contextRef:function(){return this.refs.translationAttributionLink;}.bind(this),onCloseButtonClick:this._onNUXClose,position:"below",shown:this.state.isShowingNux},h.NUX_MESSAGE)};},_getAttributionText:function(){var y=this.props.translationApp;if(y===l.BING_TRANSLATOR_APP)return h.TRANSLATED_BY_BING;if(y===l.FB_AND_BING_TRANSLATOR_APP)return h.PARTLY_TRANSLATED_BY_BING;return h.AUTOMATICALLY_TRANSLATED;},_handleToggle:function(y){this.setState({isShown:y});},_handleLinkClick:function(){if(!this.state.isShown)this._logTranslationPreferencesClick();this.setState({isShown:!this.state.isShown});this._onNUXClose();},_onNUXMount:function(){if(!this.state.isShowingNux)return;new g().setURI(o.getURIBuilder().getURI()).send();},_onNUXClose:function(){this.setState({isShowingNux:false});},_logTranslationPreferencesClick:function(){m.log('LtgTranslationPreferencesLoggerConfig',{translation_id:this.props.translationID,translation_app:this.props.translationApp,fbid:this.props.feedbackTargetID,content_locale:this.props.sourceLocale,target_locale:this.props.targetLocale,author_id:this.props.authorID,viewer_id:this.props.viewerID,viewer_understood_locales:this.props.viewerLocales,translation_trigger:this.props.translationTrigger,click_type:n.CLICK_TRANSLATION_PREFERENCES});}});e.exports=x;},null);
__d("LtgAutoTranslation.react",["CSS","ContentTranslationStrings","React","BanzaiLogger","TranslationPreferenceEvent","Link.react","LtgScoreFeedbackButton.react","LtgTranslationPreferencesDropdown.react","cx","highlight"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=i,r=q.PropTypes,s=i.createClass({displayName:"LtgAutoTranslation",propTypes:{originalMessage:r.object.isRequired,translatedMessage:r.object.isRequired,shouldShowNux:r.bool,shouldShowPreferences:r.bool},getDefaultProps:function(){return {shouldShowNux:false,shouldShowPreferences:false};},getInitialState:function(){return {isShowingOriginal:false};},render:function(){var t=this.state.isShowingOriginal?h.HIDE_ORIGINAL:h.SEE_ORIGINAL;return (i.createElement("div",{className:(("_5pio")+(this.state.isShowingOriginal?' '+"_3-9b":''))},i.createElement(n,i.__spread({isShowingOriginal:this.state.isShowingOriginal},this.props)),' ',"·",' ',i.createElement(l,{onClick:this._toggle},t),i.createElement("div",{className:"_43f8"},i.createElement(m,i.__spread({},this.props)))));},_toggle:function(){this.state.isShowingOriginal?this._hideOriginal():this._showOriginal();this.setState({isShowingOriginal:!this.state.isShowingOriginal});},_showOriginal:function(){var t=this.props.originalMessage;g.addClass(this.props.translatedMessage,"_3-9b");g.show(t);this._logShowOriginalClick(k.CLICK_SEE_ORIGINAL);p(t);},_hideOriginal:function(){g.removeClass(this.props.translatedMessage,"_3-9b");g.hide(this.props.originalMessage);this._logShowOriginalClick(k.CLICK_HIDE_ORIGINAL);},_logShowOriginalClick:function(t){j.log('LtgTranslationPreferencesLoggerConfig',{translation_id:this.props.translationID,translation_app:this.props.translationApp,fbid:this.props.feedbackTargetID,content_locale:this.props.sourceLocale,target_locale:this.props.targetLocale,author_id:this.props.authorID,viewer_id:this.props.viewerID,viewer_understood_locales:this.props.viewerLocales,translation_trigger:this.props.translationTrigger,click_type:t});}});e.exports=s;},null);